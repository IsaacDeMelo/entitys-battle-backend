<!DOCTYPE html>
<html>
<head>
    <title>Goofymon Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: #111; color: white; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .box { background: #222; padding: 20px; border: 2px solid #3498db; width: 90%; max-width: 350px; text-align: center; border-radius: 10px; box-shadow: 0 0 20px rgba(52,152,219,0.3); }
        input, select { width: 90%; padding: 12px; margin: 8px 0; background: #000; border: 1px solid #555; color: white; border-radius: 5px; }
        button { width: 100%; padding: 12px; background: #3498db; border: none; color: white; font-weight: bold; cursor: pointer; margin-top: 15px; border-radius: 5px; }
        .tab { display: flex; justify-content: space-between; margin-bottom: 20px; border-bottom: 1px solid #333; }
        .tab div { flex: 1; padding: 10px; cursor: pointer; }
        .active { border-bottom: 3px solid #f1c40f; color: #f1c40f; font-weight: bold; }
        .starter-opt { display: inline-block; margin: 5px; cursor: pointer; border: 2px solid transparent; padding: 5px; }
        .starter-opt img { width: 50px; height: 50px; }
        .starter-opt input { display: none; }
        .starter-opt input:checked + img { border: 2px solid #f1c40f; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="box">
        <h1>GOOFYMON</h1>
        <div class="tab"><div id="btnLogin" class="active" onclick="toggle('login')">Entrar</div><div id="btnReg" onclick="toggle('register')">Cadastrar</div></div>
        <form id="formLogin" action="/login" method="POST">
            <input type="text" name="username" placeholder="Usuário" required>
            <input type="password" name="password" placeholder="Senha" required>
            <button>JOGAR</button>
        </form>
        <form id="formRegister" action="/register" method="POST" style="display:none;">
            <input type="text" name="username" placeholder="Novo Usuário" required>
            <input type="password" name="password" placeholder="Senha" required>
            <select name="skin"><% for(let i=1; i<=skinCount; i++) { %><option value="char<%=i%>">Personagem <%=i%></option><% } %></select>
            <p style="margin:10px 0 5px 0; color:#aaa; font-size:0.9rem;">Escolha seu Inicial</p>
            <div style="display:flex; justify-content:center;">
                <% if(starters && starters.length > 0) { %>
                    <% starters.forEach(s => { %>
                        <label class="starter-opt">
                            <input type="radio" name="starterId" value="<%= s.id %>" required>
                            <!-- VERIFICA SE O SPRITE É URL OU LOCAL -->
                            <% if(s.sprite) { %>
                                <img src="<%= s.sprite %>" title="<%= s.name %>">
                            <% } else { %>
                                <span><%= s.name %></span>
                            <% } %>
                        </label>
                    <% }) %>
                <% } else { %><small>Sem iniciais. Aguarde um Admin.</small><% } %>
            </div>
            <button style="background:#2ecc71">CRIAR CONTA</button>
        </form>
        <% if(typeof error !== 'undefined' && error) { %><p style="color:#e74c3c; margin-top:10px;"><%= error %></p><% } %>
    </div>
    <script>function toggle(m){document.getElementById('formLogin').style.display=m==='login'?'block':'none';document.getElementById('formRegister').style.display=m==='register'?'block':'none';document.getElementById('btnLogin').classList.toggle('active',m==='login');document.getElementById('btnReg').classList.toggle('active',m==='register');}</script>
</body>
</html>